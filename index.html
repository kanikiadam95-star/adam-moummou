<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ADAM MOUMMOU - Dino</title>

<style>
body {
    margin: 0;
    font-family: Arial, sans-serif;
    background: #f7f7f7;
    color: #111;
    text-align: center;
}

.page { display: none; }
.page.active { display: block; }

h1 {
    margin-top: 40px;
    font-size: 2.5em;
}

button {
    padding: 12px 30px;
    font-size: 1.2em;
    border: 2px solid #111;
    background: white;
    cursor: pointer;
    margin: 10px;
}

#gameCanvas {
    background: white;
    display: block;
    margin: 20px auto;
    border-bottom: 3px solid #111;
}

#score {
    font-size: 18px;
}

/* ===== GAME OVER ===== */
#gameOver {
    position: fixed;
    top: 0; left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.85);
    color: white;
    display: none;
    justify-content: center;
    align-items: center;
    flex-direction: column;
    z-index: 10;
}

#gameOver h2 {
    font-size: 3em;
    margin-bottom: 20px;
}

#gameOver p {
    font-size: 1.5em;
}
</style>
</head>
<body>

<!-- الأصوات -->
<audio id="clickSound" src="https://www.soundjay.com/buttons/sounds/button-30.mp3"></audio>
<audio id="jumpSound" src="https://www.soundjay.com/buttons/sounds/button-16.mp3"></audio>
<audio id="startSound" src="https://www.soundjay.com/buttons/sounds/button-3.mp3"></audio>
<audio id="loseSound" src="https://www.soundjay.com/misc/sounds/fail-buzzer-01.mp3"></audio>

<!-- الصفحة الأولى -->
<div class="page active" id="home">
    <h1>ADAM MOUMMOU</h1>
    <button onclick="startGame()">START GAME</button>
</div>

<!-- صفحة اللعبة -->
<div class="page" id="gamePage">
    <h1>Dino Game</h1>
    <div id="score">Score: 0</div>
    <canvas id="gameCanvas" width="600" height="200"></canvas>
    <button onclick="goHome()">BACK</button>
</div>

<!-- GAME OVER SCREEN -->
<div id="gameOver">
    <h2>GAME OVER</h2>
    <p id="finalScore"></p>
    <button onclick="restartGame()">RESTART</button>
</div>

<script>
const clickSound = document.getElementById("clickSound");
const jumpSound  = document.getElementById("jumpSound");
const startSound = document.getElementById("startSound");
const loseSound  = document.getElementById("loseSound");

const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");

let dino, cactus, gravity, score, loopId;

/* الصفحات */
function startGame(){
    clickSound.play();
    startSound.play();
    document.getElementById("home").classList.remove("active");
    document.getElementById("gamePage").classList.add("active");
    initGame();
}

function goHome(){
    clickSound.play();
    cancelAnimationFrame(loopId);
    document.getElementById("gamePage").classList.remove("active");
    document.getElementById("home").classList.add("active");
}

/* GAME OVER */
function showGameOver(){
    loseSound.play();
    document.getElementById("finalScore").innerText = "Score: " + score;
    document.getElementById("gameOver").style.display = "flex";
}

function restartGame(){
    clickSound.play();
    document.getElementById("gameOver").style.display = "none";
    initGame();
}

/* اللعبة */
function initGame(){
    dino = { x: 50, y: 150, w: 40, h: 40, vy: 0, jump: false };
    cactus = { x: 600, y: 150, w: 20, h: 40 };
    gravity = 1;
    score = 0;
    document.getElementById("score").innerText = "Score: 0";
    gameLoop();
}

/* القفز */
function jump(){
    if(!dino.jump){
        dino.vy = -15;
        dino.jump = true;
        jumpSound.play();
    }
}

document.addEventListener("keydown", e=>{
    if(e.code==="Space" || e.code==="ArrowUp") jump();
});
document.addEventListener("touchstart", jump);

/* loop */
function gameLoop(){
    ctx.clearRect(0,0,canvas.width,canvas.height);

    dino.vy += gravity;
    dino.y += dino.vy;
    if(dino.y >= 150){
        dino.y = 150;
        dino.vy = 0;
        dino.jump = false;
    }

    ctx.fillStyle = "#111";
    ctx.fillRect(dino.x, dino.y, dino.w, dino.h);

    cactus.x -= 5;
    if(cactus.x < -20){
        cactus.x = 600;
        score++;
        document.getElementById("score").innerText = "Score: " + score;
    }
    ctx.fillRect(cactus.x, cactus.y, cactus.w, cactus.h);

    if(
        dino.x < cactus.x + cactus.w &&
        dino.x + dino.w > cactus.x &&
        dino.y < cactus.y + cactus.h &&
        dino.y + dino.h > cactus.y
    ){
        cancelAnimationFrame(loopId);
        showGameOver();
        return;
    }

    loopId = requestAnimationFrame(gameLoop);
}
</script>

</body>
</html>
